# SQLite LEFT JOIN ######################

[Файл с запросами][querys]   
[Оригинальная статья][origin]

[querys]: ./querys.sql
[origin]: https://www.sqlitetutorial.net/sqlite-left-join/

## Обзор ##############################

В этом руководстве вы узнаете как использовать предложение `LEFT JOIN` для выбора данных из нескольких таблиц.

## Знакомство с предложением SQLite `LEFT JOIN`

Так же как и `INNER JOIN`, предложение `LEFT JOIN` является необязательным предложением выражения `SELECT`. `LEFT JOIN` используется для запроса данных из нескольких связанных таблиц.

Предположим у вас есть две таблицы: `A` и `B`.

- `A` имеет столбцы `m` и `f`.

- `B` имеет столбцы `n` и `f`.

Чтобы выполнить объединение между `A` и `B` используя `LEFT JOIN` используется следующее выражение:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
SELECT
  a,
  b
FROM
  A
LEFT JOIN B ON A.f = B.f
WHERE search_condition;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Выражение `A.f = B.f` является условным выражением. Кроме оператора сравнения (`=`) вы можете использовать такие операторы как (`>`), (`<`) и т.д.

Выражение возвращает результирующий набор, который содержит:

1. Строки таблицы `A` (левая таблица), которые имеют соответствующие строки в таблице `B`.

2. Строки из таблицы `A` и строки из таблицы `B`, которые заполнены значениями `NULL` в случае когда строки из таблицы `A` не имеют каких-либо соответствующих строк из таблицы `B`.

Другими словами, все строки из таблицы `A` будут включены в результирующий набор, вне зависимости от того, есть ли совпадения в таблице `B` или нет.

В случае если в выражении есть предложение `WHERE`, `search_condition` в предложении `WHERE` применяется после того, как сопоставление в `LEFT JOIN` будет завершено.

Посмотрите следующую иллюстрацию предложения `LEFT JOIN` между таблицами `A` и `B`.

![LeftJoinExample][]

Все строки из таблицы `A` включены в результирующий набор.

Из-за того, что вторая строка таблицы `A` `(a2, 2)` не имеет сопоставленной строки из таблицы `B`, предложение `LEFT JOIN` создает *поддельную* строку, заполненную значением `NULL`.

Следующая диаграмма показывает работу предложения `LEFT JOIN`.

![LeftJoinDiagram][]

Следует отметить, что `LEFT OUTER JOIN` то-же самое, что и `LEFT JOIN`.

## Примеры SQLite `LEFT JOIN`

Мы будем использовать таблицы `artists` и `albums` тестовой базы данных для демонстрации.

![ArtistsAlbums][]

Один альбом пренадлежит одному артисту. В то время как один артист может имет ноль или более альбомов.

Чтобы найти артистов, которые не миеют каких-либо альбомов используя предложение `LEFT JOIN`, мы выбирем артистов и их соответствующие альбомы. Если артист не имеет альбомы, знаыение столбца `albumId` будет равно `NULL`.

Для отображения артистов, кторые не имеют альбомы, мы должны выбрать из 2х вариантов:

- Первый, использовать предложение `ORDER BY`, чтобы список строк, чьи `albumId` со значением `NULL` шли сначала.

- Второй, использовать предложение `WHERE` и оператор `IS NULL` для вывода только тех артистов, которые не имеют альбомы.

Следующее выражение сипользует предложение `LEFT JOIN` с предложением `ORDER BY`.

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
SELECT
  artists.artistId,
  albumId
FROM
  artists
LEFT JOIN albums ON
  albums.artistId = artists.artistId
ORDER BY
  albumId;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Следующее выражение использует `LEFT JOIN` с предложением `WHERE`.

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
SELECT
  ar.artistId,
  albumId
FROM
  artists ar
LEFT JOIN albums USING (artistId)
WHERE albumId IS NULL;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

В этом руководстве вы изучили как использовать `LEFT JOIN` для выбора данных из нескольких таблиц.

Предидущее руководство < [SQLite INNER JOIN][prev]  
Следующее руководство > [SQLite CROSS JOIN][next]

[prev]: ../12_InnerJoin/translate.md
[next]: ../14_CrossJoin/translate.md

[LeftJoinExample]:          ./SQLite-left-join-example.png
[LeftJoinDiagram]:          ./SQLite-Left-Join-Venn-Diagram.png
[ArtistsAlbums]:            ./artists_albums.png