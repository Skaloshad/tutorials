# SQLite EXCEPT ######################

[Файл с запросами][querys]   
[Оригинальная статья][origin]

[querys]: ./querys.sql
[origin]: https://www.sqlitetutorial.net/sqlite-except/

## Обзор ##############################

В этом руководстве вы узнаете, как использовать оператор SQLite `EXCEPT`.

## Знакомство с оператором SQLite `EXCEPT`

Оператор SQLite `EXCEPT` сравнивает выводы двух запросов и возвращает различные строки из левого запроса, которые не имеют вывода в правом запросе.

Нижу показан синтаксис оператора `EXCEPT`:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
SELECT select_list1
FROM table1
EXCEPT
SELECT select_list2
FROM table2
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Этот запрос должен удовлетворять следующим правилам:

- Первое, количество столбцов в листе выбора обоих запросов должно быть одинакомым.

- Второе, порядок столбцов и их тип должны быть сопоставимыми.

Следующее выражение создает две таблицы `t1` и `t2` и записывает в них некие данные:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
CREATE TABLE t1 (
  v1 INT
);

INSERT INTO t1 (v1)
VALUES (1), (2), (3);

CREATE TABLE t2 (
  v2 INT
);

INSERT INTO t2 (v2)
VALUES (2), (3), (4);
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Слудующее выражение показывает, как используя оператор `EXCEPT` сравнить результаты двух запросов:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
SELECT v1
FROM t1
EXCEPT
SELECT v2
FROM t2;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Слудующее изображение иллюстрирует работу оператора `EXCEPT`:

![except][]

## Примеры SQLite `EXCEPT`

Мы будем использовать таблицы `artists` и `albums` из тестовой базы данных для демонстрации.

![albums_artists][]

Слудующее выражение найдет идентификаторы артистов, которые не имеют альбомов в таблице `albums`:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
SELECT artistId
FROM artists
EXCEPT
SELECT artistId
FROM albums;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

В этом руководстве вы изучили, как использовать оператор SQLite `EXCEPT` для сравнения двух запросов и возврата уникальных строк из левого зароса, которые не попали в правый запрос.

Предидущее руководство < [SQLite UNION][prev]  
Следующее руководство > [SQLite INTERSECT][next]

[prev]: ../19_Union/translate.md
[next]: ../21_Intersect/translate.md

[except]: ./SQLite-EXCEPT-Operator-Illustration.png
[albums_artists]: ./artists_albums.png