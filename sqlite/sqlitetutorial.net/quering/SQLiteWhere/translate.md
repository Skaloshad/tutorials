# SQL WHERE ###########################

[Файл с запросами][querys]   
[Оригинальная статья][origin]

[querys]: ./querys.sql
[origin]: https://www.sqlitetutorial.net/sqlite-where/

## Обзор ##############################

В этом руководстве вы изучите как использовать предложение SQLite `WHERE` чтобы указать условие поиска для строк, возвращенных запросом.

## Знакомство с предложением SQLite `WHERE` 

Предложение `WHERE` это необязательая часть оператора `SELECT`. Оно ставиться после предложения `FROM` как показано ниже:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
SELECT 
  column_list
FROM
  table
WHERE
  search_condition;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

В этом примере вы добавили предложение `WHERE` в оператор `SELECT` чтобы отфильтровать строки, возвращенные запросом. Во время вычисления, оператор SQLite `SELECT` с предложением `WHERE` использует следующие шаги:

1. Во-первых, проверяется таблица в предложении `FROM`.
2. Во-вторых, вычисляются условия в предложении `WHERE` для получения строк, удовлетворяющиъ условиям.
3. В-третих, создается финальный рузультирующий набор, основанный на строках из предыдущего шага вместе с колонками из предложения `SELECT`.

Условие поиска в `WHERE` имеет следующую форму:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
left_expression COMPARISON_OPERATOR right_expression
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Например, вы можете сформулировать условие поиска одним из следующих способов:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
WHERE column_1 = 100;
WHERE column_2 IN (1, 2, 3);
WHERE column_3 LIKE 'An%';
WHERE column_4 BETWEEN 10 AND 20;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Помимо оператора `SELECT`, вы можете использовать предложение `WHERE` в операторах `UPDATE` и `DELETE`.

## Операторы сравнения SQLite #########

Оператор сравнения проверяет, совподают ли два выражения. В таблице ниже представлены операторы сравнения, которые вы можете использовать для построения выражения:

| Оператор  | Значение |
|-----------|----------|
| =         | Равно    |
| <> или != | Не равно |
| <         | Меньше   |
| >         | Больше   |
| <=        | Больше или равно |
| >=        | Меньше или равно |

## Логические операторы SQLite ########

Логические операторы позволяют вам проверять исиенность некоторых выражений. Логические операторы возвращают `1`, `0` или `NULL` значения.

Обратите внимание, что SQLite не поддерживает тип данных `Boolean`, так что `1` означает `TRUE`, а `0` означает `FALSE`.

Следующая таблица показывает логические операторы:

| Оператор   | Значение  |
|------------|-----------|
| `ALL`      | Возвращает `1` если все выражения `1` |
| `AND`      | Возвращает `1` если оба выражения `1`, и `0` если одно из выражений `0` |
| `ANY`      | Возвращает `1` если хотябы одно выражение из множества `1` | 
| `BETWEEN`  | Возвращает `1` если значение находится в заданном диапазаоне |
| `EXISTS`   | Возвращает `1` если подзапрос содержит какие либо строки |
| `IN`       | Возвращает `1` если значение входит в список значений |
| `LIKE`     | Возвращает `1` если значение совподает с шаблоном |
| `NOT`      | Инвертирует значение остальных операторов, таких как - `NOT EXISTS`, `NOT IN`, `NOT BETWEEN`, и т.д. |
| `OR`       | Возвращает `1` если любое выражение `1` |

## Примеры предложений SQLite `WHERE` #

Мы будем использовать таблицу `tracks` из тестовой базы, чтобы показать, как использовать предложение `WHERE`.

|   tracks       |
|----------------|
| * Tracked      |
|   Name         |
|   AlbumId      |
|   MediaTypeId  |
|   GenderId     |
|   Composer     |
|   Milliseconds |
|   Bytes        |
|   UnitPrice    |

Оператор сравнения (`=`) является самым часто используемым оператором. Например, следующий запрос использует предложение `WHERE` с оператором сравнения, чтоы найти все треки из альбома с id 1:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
SELECT
  name,
  milliseconds,
  bytes,
  albumId
FROM
  tracks
WHERE
  albumId = 1;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

SQLite сравнивает значения хранящиеся в столбце `albumId` со значением литерала `1`, для проверки их равенства. Будут возвращены только те строки, которые удовлетворяют условию.

Когда вы сравниваете два значения, вы должны убедится, что они имеют одинаковый тип данных. Вы должны сравнивать числа и числами, строки со строками и т.д.

В случае, когда вы сравниваете значения разных типов, например строку с числом, SQLite произведет неявное приведение типов, но в целов, вы должны избегать этого.

Вы можете использовать логические операторы, чтобы комбинировать выражения. Например, чтобы получить трэки их альбома 1, которые имеют длинну больше чем 200,000 миллисекунд, используйте выражение ниже:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
SELECT
  name,
  milliseconds,
  bytes,
  albumId
FROM
  tracks
WHERE
  albumId = 1
  AND milliseconds > 250000;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Выражение использует два условия `albumId = 1` и `milliseconds > 250000`. Для комбинации условий используется логический оператор `AND`.

## Пример предложения SQLite `WHERE` с оператором `LIKE`

Иногда, вы можете не помнить, какие в точности данные вы хотите искать. В этом случае вы выполняете неточный поиск с помощью оператора `LIKE`.

Например, чтобы найти какие треки были написаны Смитом, используйте `LIKE` оператор как показано ниже:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
SELECT
  name,
  albumId,
  composer
FROM
  tracks
WHERE
  composer LIKE '%Smits%'
ORDER BY
  albumId;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Вы получили треки, написанные R.A. Smith-Diesel, Adrian Smith и т.д.

## Пример предложения SQLite `WHERE` с оператором `IN`

Оператор `IN` позволяет вам проверить находится ли значение в разделенном запятыми списке значений. Например, чтобы найти треки, которые имеют id типа медиа 2 или 3, используйте оператор `IN`, как показана в выражении ниже:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
SELECT
  name,
  albumId,
  mediatypeId
FROM
  tracks
WHERE
  mediatypeId IN (2, 3);
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

В этом руководстве вы изучили, как использовать предложение SQLite `WHERE` для фильтрации финального результирующего набора, используя условия и логические операторы.

Предидущее руководство < [SQLite SELECT DISTINCT][prev]  
Следующее руководство > [SQLite LIMIT][next]

[prev]: ../SQLiteSelectDistinct/translate.md
[next]: ../SQLiteLimit/translate.md