# SQLite INSERT #########################

[Файл с запросами][querys]   
[Оригинальная статья][origin]

[querys]: ./querys.sql
[origin]: https://www.sqlitetutorial.net/sqlite-insert/

## Обзор ##############################

В этом руководстве вы узнаете как использовать выражение SQLite `INSERT` для вставки новых строк в таблицу.

Для вставки данных в таблицу используется выражение `INSERT`. SQLite поддерживает несколько форм выражение `INSERT`, что позволяет вставлять одну строку, несколько строк и значения по умолчанию в таблицу.

Дополнительно, вы можете вставлять строку в таблицу, используя данные предоставленные выражением `SELECT`.

## SQLite `INSERT` - вставка единичной строки в таблицу

Для вставки единичной строки в таблицу используется следующее выражение `INSERT`:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
INSERT INTO table (column1, column2, ...)
VALUES (value1, value2, ...);
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Давайте исследуем выражение `INSERT` более детально:

- Первое. определить имя таблицы в которую вы хотите вставлять данные после ключегого слова `INSERT INTO`.

- Второе. добавлен список, разделенный запятыми с названиями столбцов, после названия табицы. Список столбцов является не обязательным. Однако добавление списка колонок после названия таблицы является хорошей практикой.

- Третье. Добален список, разделенный запятыми со значениями посел ключегого слова `VALUES`. Если вы указали список колонок, вы должны указать значения для каждой колонки в этом списке. Количество значений в списке значений должно быть одинаковым с количеством столбцов в списке столбцов.

Мы будем использовать таблицу `artists` тестовой базы данных для демонстрации.

![artists][]

Следующее выражение вставляет новую строку в таблицу `artists`:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
INSERT INTO artists (name)
VALUES ('Bud Powell');
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Из-за того, что столбец `artistId` является автоинкрементируемым столбцом, вы можете не указывать его в выражении. SQLite автоматически сгенерирует последовательный целочисленный номер для вставки в столбец `artistId`.

Вы можете проверить операцию вставки используя следующее выражение `SELECT`:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
SELECT 
  artistId,
  name
FROM
  artists
ORDER BY
  artistId DESC
LIMIT 1;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Как видете, мы имеем новую строку в таблице `artists`.

## SQLite `INSERT` - Вставка нескольких строк в таблицу

Для вставки нескольких строк в таблицу используется следующая форма выражение `INSERT`:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
INSERT INTO table1 (column1, column2, ...)
VALUES 
  (value1, value2, ...),
  (value1, value2, ...),
  ...
  (value1, value2, ...);
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Каждый список значений, идущей за предложением `VALUES`, является строкой, которая будет вставлена в таблицу.

Следующий пример вставляет три строки в таблицу `artists`:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
INSERT INTO artists (name)
VALUES
  ("Buddy Rich"),
  ("Candido"),
  ("Charlie Byrd");
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

SQLite выведет сообщение:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Row Affected: 3
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Вы можете проверить результат используя следующее выражение:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
SELECT
  artistId,
  name
FROM
  artists
ORDER BY
  artistId DESC
LIMIT 3;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

## SQLite `INSERT` - Вставка значений по умолчанию

Когда вы создаете новую таблицу используя выражение `CREATE TABLE`, вы можете указать значение по умолчанию для столбцов, или, `NULL`, если значение по умолчанию не указано.

Третья форма выражения `INSERT` - `INSERT DEFAULT VALUES`, который вставляет новые строки в таблицу, используя значения по умолчанию, указанные при объявления столбца, или `NULL`, если значение по умолчанию не указано и столбцец не имеет ограничения `NOT NULL`.

Например, следующее выражение вставляет новую строку в таблицу `artists` используя `INSERT DEFAULT VALUES`:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
INSERT INTO artists DEFAULT VALUES;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Для проверки вставки, используйте следующее выражение:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
SELECT
  artistId,
  name
FROM
  artists
ORDER BY
  artistId DESC;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Значение по умолчанию столбца `artistId` является следующее по порядку целое число. Однако колонка `name` не имеет какого-либо значения по умолчанию, следовательно выражение `INSERT DEFAULT VALUES` вставляет `NULL`.

## SQLite `INSERT` - Вставка новой строки с данными, предоставленными выражением `SELECT`

Предположим вы хотите забэкапить таблицу `artists`, вы можете следовать этим шагам:

Первое. Создайте новую таблицу под названием `artists_backup` как показано ниже:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
CREATE TABLE artists_backup (
  artistId INTEGER PRIMARY KEY AUTOINCREMENT,
  name NVARCHAR
);
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Для вставки данных в таблицу `artists_backup` из таблицы `artists`, спользуется выражение `INSERT INTO SELECT` как показано ниже:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
INSERT INTO artists_backup
SELECT artistId, neme
FROM artists;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Если вы выберете данные из таблицы `artusts_backup`, вы увидите все данные из таблицы `artists`.

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
SELECT * FROM artists_backup;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

В этом руководстве вы изучили, как использовать разные формы выражения SQLite `INSERT`, которое вставляет строки в таблицу.

[SQLite INSERT statement][SQLite_insert_statement]

Предидущее руководство < [SQLite CASE][prev]  
Следующее руководство > [SQLite UPDATE][next]

[prev]: ../24_Case/translate.md
[next]: ../26_Update/translate.md

[artists]: ./artists.png
[SQLite_insert_statement]: https://www.sqlite.org/lang_insert.html