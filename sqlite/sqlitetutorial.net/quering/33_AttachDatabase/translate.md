# SQLite ATTACH DATABASE #########################

[Файл с запросами][querys]   
[Оригинальная статья][origin]

[querys]: ./querys.sql
[origin]: https://www.sqlitetutorial.net/sqlite-attach-database/

## Обзор ##############################

В этом руководстве вы узнаете, как прикрепить дополнитльную базу данных к текущему соединению используя выражение SQLite `ATTACH DATABASE`.

## Знакомство с выражением SQLite `ATTACH DATABASE`

Когда вы соединяетесь с базой данных, она называется `main` несмотря на название файла базы данных. Дополнительно, вы можете получить доступ к временной базе данных, хранящей временные таблицы и другие объекты базы данных, через базу данных `temp`.

Следовательно, каждое соединение SQLite имеет `main` базу данных и `temp` базу данных, в случае если вы имеете дело с временной базой данных.

Для присоединения дополнительной базы данных к текущему соединению используется выражение `ATTACH DATABASE`, как показано ниже:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ATTACH DATABASE file_name AS database_name;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Выражение связывает файл базы данных `file_name` с текущим соединением базы данных под логическим названием `database_name`.

Если файл базы данных `file_name` не существует, выражение создаст новый файл базы данных.

Однажды присоединив дополнительную базу данных, вы можете ссылатся на любой объект БД под названием `database_name`. Например, чтобы сослаться на таблицу `people` в базе данных `contacts`, используйте следующее выражение - `contacts.people`.

В случае, если вы хотите создать новую БД в памяти и присоединить её к текущему соединению, используйте имя файла `:memory:`.

Вы можете подключить несколько БД в памяти, в одно и то же время, с одним условием, что каждая БД должна быть уникальна.

Если вы укажите пустое имя файла `''`, выражение создаст БД с резервной копией файла.

> Обратите внимание, что SQLite автоматически удаляет все временные и оперативные БД, когда соединение будет закрыто.

## Пример SQLite `ATTACH DATABASE`

Для начала, подключимся к тестовой БД `chinook` используя команду `sqlite3` как показано ниже:

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
> sqlite3 ./chinook.db;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Далее, испльзуете команду `.databases` для вывода списка всех баз данных в текущем коннекшене.

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
sqlite> .databases
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Затем, используйте выражение `ATTACH DATABASE` для создания новой базы данных под названием `contacts` и подсоединить ее к текущему соединению.

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
sqlite> attach database 'contacts.db' ad contacts;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Далее, используйте `.databases` для отображения списка всех баз данных текущенго соединения.

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
sqlite> .databases
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

После этого, создайте новую таблицу с именем `people` в базе `contacts` и заполним ее данными из таблицы `customers` основной БД.

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
sqlite> CREATE TABLE contacts.people(first_name TEXT, last_neme TEXT);
sqlite> INSERT INTO contacts.people SELECT firstName, lastName FROM customers;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

> Обратите внимание, что нужно обращатся к таблице `people` в БД `contacts` используя следующую конвенцию наименований - `contacts.people`.

Наконец, выберем данные.

~~~ SQL ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
SELECT * FROM contacts.people;
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Для большей информации обратитесь к официальной документации. 

В этом руководстве вы изучили, как использовать выражение SQLite `ATTACH DATABASE` для добавления дополнительной БД к текущему соединению.

---------------------------------------

Предидущее руководство < [SQLite DATE AND TIME][prev]  
Следующее руководство > [SQLite CREATE TABLE][next]

[prev]: ../32_DateAndTime/translate.md
[next]: ../34_CreateTable/translate.md